<!doctype html>
{% import 'admin/layout.html' as layout with context -%}
{% import 'admin/oy_macros.html' as oy with context -%}
{% import 'admin/static.html' as admin_static with context %}
{% import "oy/contrib/admin/form_fields_macros.html" as form_field_macros with context %}
<html>
<head>
  {% block head %}
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <title>
  {% block title %}
  {% if admin_view.category %}
  {{ admin_view.category ~ " - " }}
  {% endif %}
  {{ admin_view.name ~ " - " }}{{ admin_view.admin.name }}
  {% endblock %}
  </title>

  {% block head_meta %}{% endblock %}

  {% block head_css %}
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/bootstrap/css/bootstrap.min.css") }}">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/font-awesome/css/font-awesome.min.css") }}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/admin-lte/AdminLTE-without-plugins.min.css") }}">
  <!-- AdminLTE Skin. -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/admin-lte/skin-black.min.css") }}">
  <!-- Metesmenu. -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/metisMenu/metisMenu.min.css") }}">
  <!-- Lity lightbox. -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/lity/lity.min.css") }}">
  <!-- toastr notifications. -->
  <link rel="stylesheet" href="{{ oy_admin_static("vendor/toastr/toastr.min.css") }}">
  <!-- Custom css -->
  <link rel="stylesheet" href="{{ oy_admin_static("css/oyadmin.min.css") }}">
  {% endblock head_css %}

  {% block admin_view_extra_css %}
  {% if admin_view.extra_css %}
  {% for css_url in admin_view.extra_css %}
  <link href="{{ css_url }}" rel="stylesheet">
  {% endfor %}
  {% endif %}
  {% endblock %}

  {% block form_fields_css %}
  {{ form_field_macros.render_form_css() }}
  {% endblock %}

  {% block head_tail %}{% endblock %}
  {% endblock %}
</head>
<body class="hold-transition skin-black sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">

  <header class="main-header">
    {% block brand %}
    {% endblock brand %}

    <!-- Header Navbar. -->
    <nav class="navbar navbar-static-top">
      <!-- Sidebar toggle button-->
      <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
        {% include "oy/contrib/admin/includes/notification_area.html" %}
        <!-- Control Sidebar Toggle Button -->
        <li>
          <a href="#" data-toggle="control-sidebar" role="button" aria-expanded="false">
            <span class="sr-only">Toggle Right side menu</span>
            <i class="fa fa-gears"></i>
          </a>
        </li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Left side column. contains the sidebar -->
  {% block side_menu %}
  <aside class="main-sidebar">
    <!-- sidebar. -->
    <section class="sidebar">
      <!-- sidebar menu. -->
      <ul class="sidebar-menu" data-widget="tree">
        <li class="header" role="heading">{{ gettext("Main Menu") }}</li>
        {{ oy.menu() }}
        {% block menu_links %}
        <li class="header" role="heading">{{ gettext("Other Links") }}</li>
        {{ layout.menu_links() }}
        {% endblock menu_links %}
      </ul>
    </section>
    <!-- /.sidebar -->
  </aside>
  {% endblock side_menu %}

  {% block access_control %}{% endblock %}

  {# store the jinja2 context for form_rules rendering logic #}
  {% set render_ctx = h.resolve_ctx() %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      {% block page_header %}
      <h1>{{admin_view.name|capitalize}}</h1>
      {% endblock page_header %}
    </section>

    <!-- Main content -->
    <section class="content">
    <div class="row">
    <div class="page_body_wrapper col-md-offset-1">
    {% block body %}{% endblock %}
    </div>
    </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <div class="pull-right hidden-xs">
      <b>Oy Content Management System</b>
    </div>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark" aria-hidden="true">
  {% include "oy/contrib/admin/includes/secondary_sidebar.html" %}
  </aside>
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

{% block tail_js %}
<!-- jQuery 3 -->
<script src="{{ oy_admin_static("vendor/jquery/jquery.min.js") }}"></script>
<!-- Bootstrap 3.3.7 -->
<script src="{{ oy_admin_static("vendor/bootstrap/js/bootstrap.min.js") }}"></script>
<!-- AdminLTE App -->
<script src="{{ oy_admin_static("vendor/admin-lte/adminlte.min.js") }}"></script>
<!-- metestmenu -->
<script src="{{ oy_admin_static("vendor/metisMenu/metisMenu.min.js") }}"></script>
<!-- Lity lightbox -->
<script src="{{ oy_admin_static("vendor/lity/lity.min.js") }}"></script>
<!-- toastr notifications. -->
<script src="{{ oy_admin_static("vendor/toastr/toastr.min.js") }}"></script>

<script>
  $(document).ready(function () {
    $('.sidebar-menu').tree()
  });
</script>
{% endblock %}

{% block messages %}
{{ oy.messages() }}
{% endblock %}

{% block admin_view_extra_js %}
{% if admin_view.extra_js %}
{% for js_url in admin_view.extra_js %}
<script src="{{ js_url }}" type="text/javascript"></script>
{% endfor %}
{% endif %}
{% endblock %}

{% block form_fields_js %}
{{ form_field_macros.render_form_js() }}
{% endblock %}
{% block tail %}{% endblock %}
</body>
</html>
